---
import "@/styles/global.css";
import Container from "@/components/Container.astro";
import SocialLink from "@/components/index-components/SocialLink.astro";
import EmailIcon from "@/assets/icons/email-icon.svg";
import CopyIcon from "@/assets/icons/copy-icon.svg";
import LinkedInIcon from "@/assets/icons/linkedin-logo.svg";
import GithubIcon from "@/assets/icons/github-logo.svg";
import FacebookIcon from "@/assets/icons/facebook-logo.svg";
---

<section id="contact" class="pt-16 pb-24">
  <Container class="max-w-xl">
    <h2 class="mb-4 text-center">Let's Get in Touch</h2>
    <div class="mb-8">
      If you are interested in working with me, send me an email or contact me
      through instant message!
    </div>

    <div class="mb-8">
      <h3 class="text-lg font-semibold mb-4">Email</h3>
      <div class="flex gap-2">
        <a
          href="mailto:reemanl.singh422@email.com"
          title="Click to open in mail"
          class="contact-item flex-1 min-w-0"
        >
          <EmailIcon class="w-6 text-gray-600 flex-shrink-0" />
          <div class="overflow-hidden">
            <div class="contact-label truncate">reemanl.singh422@gmail.com</div>
          </div>
        </a>
        <button
          id="copyEmailBtn"
          class="copy-button flex-shrink-0"
          title="Copy email address"
        >
          <CopyIcon class="w-5" />
        </button>
      </div>
    </div>

    <div>
      <h3 class="text-lg font-semibold mb-4">Social Media</h3>
      <div class="space-y-3">
        <SocialLink
          href="https://www.linkedin.com/in/reeman-singh"
          label="LinkedIn"
          value="in/reeman-singh"
          title="Click to open LinkedIn"
        >
          <LinkedInIcon class="w-6" />
        </SocialLink>

        <SocialLink
          href="https://github.com/ReemanS"
          label="GitHub"
          value="ReemanS"
          title="Click to open GitHub"
        >
          <GithubIcon class="w-6" />
        </SocialLink>

        <SocialLink
          href="https://facebook.com/ree.manok"
          label="Facebook"
          value="ree.manok"
          title="Click to open Facebook"
        >
          <FacebookIcon class="w-6" />
        </SocialLink>
      </div>
    </div>
  </Container>
</section>

<div id="toast" class="toast hidden">Email copied to your clipboard!</div>

<style>
  @reference "@/styles/global.css";

  h3 {
    @apply font-space-grotesk font-medium text-xl;
  }

  .contact-item {
    @apply flex items-center gap-4 p-4 rounded-lg border border-gray-200
       hover:border-primary active:border-primary hover:bg-primary/10 active:bg-primary/10
        transition duration-200 text-left;
  }

  .contact-label {
    @apply text-sm md:text-base font-medium text-slate-900;
  }

  .copy-button {
    @apply flex items-center justify-center p-4 rounded-lg border border-gray-200 
       hover:border-primary hover:bg-primary/10 active:border-primary active:bg-primary/10
       text-gray-400 hover:text-primary hover:cursor-pointer transition duration-200;
  }

  .toast {
    @apply fixed bottom-4 left-1/2 transform -translate-x-1/2 translate-y-8 
       bg-primary text-white px-6 py-3 rounded-lg shadow-2xl 
       opacity-0 scale-90 transition-all duration-300 ease-out z-50 text-center;
  }

  .toast.show {
    @apply opacity-100 scale-100 translate-y-0;
  }
</style>
<script is:inline>
  const copyBtn = document.getElementById("copyEmailBtn");
  const toast = document.getElementById("toast");

  if (copyBtn && toast) {
    copyBtn.addEventListener("click", async () => {
      const email = "reemanl.singh422@gmail.com";

      try {
        if (navigator.clipboard && window.isSecureContext) {
          await navigator.clipboard.writeText(email);
        }

        toast.classList.remove("hidden");
        toast.classList.add("show");

        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => toast.classList.add("hidden"), 300);
        }, 2000);
      } catch (err) {
        console.error("Failed to copy: ", err);
      }
    });
  }
</script>
